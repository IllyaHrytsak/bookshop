CREATE TABLE BOOK (
  ID          INT          NOT NULL AUTO_INCREMENT,
  BOOK_TITLE  VARCHAR(255) NOT NULL,
  BOOK_AUTHOR VARCHAR(255) NOT NULL,
  BOOK_PRICE  DOUBLE       NOT NULL,
  PRIMARY KEY (ID)
);

CREATE TABLE ROLE (
  ROLE_ID   INT NOT NULL AUTO_INCREMENT,
  ROLE_NAME VARCHAR(255),
  PRIMARY KEY (ROLE_ID)
);

CREATE TABLE ORDERS (
  ORDER_ID    INT     NOT NULL AUTO_INCREMENT,
  AMOUNT      INT     NOT NULL,
  PRICE       DOUBLE  NOT NULL,
  TOTAL_PRICE DOUBLE  NOT NULL,
  ACTIVE      BOOLEAN NOT NULL DEFAULT FALSE,
  ORDER_DATE  DATETIME,
  BOOK_ID     INT     NOT NULL,
  ACCOUNT_ID  INT     NOT NULL,

  PRIMARY KEY (ORDER_ID, BOOK_ID, ACCOUNT_ID)
);


CREATE TABLE ACCOUNT (
  ACCOUNT_ID   INT          NOT NULL AUTO_INCREMENT,
  EMAIL        VARCHAR(255) NOT NULL,
  PASSWORD     VARCHAR(255) NOT NULL,
  FIRST_NAME   VARCHAR(255) NOT NULL,
  LAST_NAME    VARCHAR(255) NOT NULL,
  PHONE_NUMBER VARCHAR(255) NOT NULL,
  CARD         DOUBLE       NOT NULL DEFAULT 500,

  ROLE_ID      INT          NOT NULL,

  PRIMARY KEY (ACCOUNT_ID, ROLE_ID)
);

ALTER TABLE ACCOUNT
  ADD FOREIGN KEY (ROLE_ID) REFERENCES ROLE (ROLE_ID);


ALTER TABLE ORDERS
  ADD FOREIGN KEY (BOOK_ID) REFERENCES BOOK (ID);

ALTER TABLE ORDERS
  ADD FOREIGN KEY (ACCOUNT_ID) REFERENCES ACCOUNT (ACCOUNT_ID);

